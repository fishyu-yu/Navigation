# Navigation System

ä¸€ä¸ªç°ä»£åŒ–çš„å¯¼èˆªç½‘ç«™ç³»ç»Ÿï¼Œå…·æœ‰ç®€æ´çš„å¡ç‰‡å¼å¸ƒå±€ã€ä¸»é¢˜åˆ‡æ¢ã€ç”¨æˆ·è®¤è¯å’Œç½‘ç«™çŠ¶æ€ç›‘æ§åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢**: åŸºäºå¡ç‰‡å¼å¸ƒå±€çš„å“åº”å¼è®¾è®¡
- ğŸŒ“ **ä¸»é¢˜åˆ‡æ¢**: æ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- ğŸ” **ç”¨æˆ·è®¤è¯**: å®‰å…¨çš„ç®¡ç†å‘˜ç™»å½•ç³»ç»Ÿ
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: å®æ—¶æ£€æµ‹ç½‘ç«™å¯ç”¨æ€§çŠ¶æ€
- ğŸ›¡ï¸ **å®‰å…¨é˜²æŠ¤**: é›†æˆéªŒè¯ç å’Œè®¿é—®é¢‘ç‡é™åˆ¶
- ğŸ“± **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- âš¡ **é«˜æ€§èƒ½**: åŸºäº Node.js + Express æ„å»º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- PostgreSQL >= 12.0 (å¯é€‰ï¼Œæ”¯æŒå†…å­˜æ•°æ®åº“)
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd navigation
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **ç³»ç»Ÿåˆå§‹åŒ–** (æ¨è)
   
   ä½¿ç”¨äº¤äº’å¼åˆå§‹åŒ–å‘å¯¼:
   ```bash
   npm run init
   ```
   
   æˆ–ä½¿ç”¨é™é»˜æ¨¡å¼ (é€‚ç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²):
   ```bash
   # è®¾ç½®ç¯å¢ƒå˜é‡
   export DB_USER="your_db_user"
   export DB_PASS="your_db_password"
   export ADMIN_PASS="your_admin_password"
   
   # è¿è¡Œé™é»˜åˆå§‹åŒ–
   npm run init-silent
   ```
   
   åˆå§‹åŒ–å‘å¯¼å°†å¸®åŠ©æ‚¨å®Œæˆ:
   - æ•°æ®åº“è¿æ¥é…ç½®
   - ç®¡ç†å‘˜è´¦æˆ·è®¾ç½®
   - å®‰å…¨é…ç½® (éªŒè¯ç ã€ä¼šè¯å¯†é’¥)
   - ç³»ç»ŸåŸºç¡€é…ç½® (ç«¯å£ã€åŸŸåã€æ—¶åŒº)

4. **æ‰‹åŠ¨é…ç½®** (å¯é€‰)
   
   å¦‚æœä¸ä½¿ç”¨åˆå§‹åŒ–å‘å¯¼ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®:
   ```bash
   npm run setup
   ```
   è¿™å°†åˆ›å»º `.env` æ–‡ä»¶å¹¶ç”Ÿæˆå®‰å…¨å¯†é’¥ã€‚
   
   æ•°æ®åº“è®¾ç½®:
   ```bash
   # åˆ›å»ºæ•°æ®åº“
   createdb -U postgres navigation
   
   # åˆå§‹åŒ–æ•°æ®åº“ç»“æ„
   npm run init-db
   ```

5. **å¯åŠ¨åº”ç”¨**
   ```bash
   npm start
   ```
   
   å¼€å‘æ¨¡å¼:
   ```bash
   npm run dev
   ```

6. **è®¿é—®åº”ç”¨**
   
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

## ğŸ“ é¡¹ç›®ç»“æ„

```
navigation/
â”œâ”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ README-PostgreSQL.md # PostgreSQL é…ç½®æŒ‡å—
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ admin.js            # ç®¡ç†åå°è„šæœ¬
â”‚   â”œâ”€â”€ app.js              # ä¸»åº”ç”¨è„šæœ¬
â”‚   â”œâ”€â”€ captcha.js          # éªŒè¯ç ç»„ä»¶
â”‚   â”œâ”€â”€ confirmation.js     # ç¡®è®¤å¯¹è¯æ¡†
â”‚   â””â”€â”€ styles.css          # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ scripts/                 # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ add-sample-data.js  # æ·»åŠ ç¤ºä¾‹æ•°æ®
â”‚   â”œâ”€â”€ init-db.sql         # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ seed-database.js    # æ•°æ®åº“ç§å­æ•°æ®
â”‚   â””â”€â”€ setup.js            # é¡¹ç›®è®¾ç½®è„šæœ¬
â”œâ”€â”€ src/                     # æºä»£ç 
â”‚   â””â”€â”€ db.js               # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ views/                   # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ partials/           # æ¨¡æ¿ç‰‡æ®µ
â”‚   â”œâ”€â”€ admin.ejs           # ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ edit.ejs            # ç¼–è¾‘é¡µé¢
â”‚   â”œâ”€â”€ index.ejs           # ä¸»é¡µ
â”‚   â””â”€â”€ login.ejs           # ç™»å½•é¡µé¢
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â””â”€â”€ server.js               # æœåŠ¡å™¨å…¥å£
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# æœåŠ¡å™¨é…ç½®
PORT=3000
SESSION_SECRET=your_random_session_secret_here

# æ•°æ®åº“é…ç½® (å¯é€‰)
DATABASE_URL=postgresql://username:password@localhost:5432/database_name
# æˆ–è€…åˆ†åˆ«é…ç½®
PGHOST=localhost
PGPORT=5432
PGUSER=your_username
PGPASSWORD=your_database_password
PGDATABASE=your_database_name

# éªŒè¯ç é…ç½® (å¯é€‰)
CAPTCHA_ENABLED=false
CAPTCHA_PROVIDER=recaptcha
RECAPTCHA_SITE_KEY=your_recaptcha_site_key
RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key

# çŠ¶æ€æ£€æµ‹é—´éš” (æ¯«ç§’)
CHECK_INTERVAL_MS=300000
```

## ğŸ“ ä½¿ç”¨æŒ‡å—

### ç®¡ç†å¯¼èˆªé¡¹ç›®

1. è®¿é—® `/login` ç™»å½•ç®¡ç†åå°
2. é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦å·
3. åœ¨ç®¡ç†é¡µé¢å¯ä»¥æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å’Œæ’åºå¯¼èˆªé¡¹ç›®
4. æ”¯æŒæ‰¹é‡çŠ¶æ€æ£€æµ‹åŠŸèƒ½

### ä¸»é¢˜åˆ‡æ¢

ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼Œå¯ä»¥åœ¨äº®è‰²å’Œæš—è‰²ä¸»é¢˜ä¹‹é—´åˆ‡æ¢ã€‚

### çŠ¶æ€ç›‘æ§

ç³»ç»Ÿä¼šå®šæœŸæ£€æµ‹æ‰€æœ‰å¯¼èˆªé¡¹ç›®çš„å¯ç”¨æ€§çŠ¶æ€ï¼š
- ğŸŸ¢ ç»¿è‰²ï¼šç½‘ç«™æ­£å¸¸è®¿é—®
- ğŸ”´ çº¢è‰²ï¼šç½‘ç«™æ— æ³•è®¿é—®
- âšª ç°è‰²ï¼šçŠ¶æ€æœªçŸ¥

## ğŸ› ï¸ å¼€å‘

### å¯ç”¨è„šæœ¬

- `npm start` - å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
- `npm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (æ”¯æŒçƒ­é‡è½½)
- `npm run setup` - åˆå§‹åŒ–é¡¹ç›®é…ç½®
- `npm run init-db` - åˆå§‹åŒ–æ•°æ®åº“ç»“æ„
- `npm run sample-data` - æ·»åŠ ç¤ºä¾‹æ•°æ®
- `npm run seed` - ä½¿ç”¨ç§å­æ•°æ®è„šæœ¬
- `npm run clear-data` - æ¸…ç†æ‰€æœ‰æ•°æ®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
- `npm run clear-db-sql` - ä½¿ç”¨SQLè„šæœ¬æ¸…ç†

### æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js, Express.js
- **æ•°æ®åº“**: PostgreSQL (å¯é€‰å†…å­˜æ•°æ®åº“)
- **æ¨¡æ¿å¼•æ“**: EJS
- **è®¤è¯**: bcrypt, express-session
- **å®‰å…¨**: express-rate-limit, éªŒè¯ç æ”¯æŒ
- **å‰ç«¯**: åŸç”Ÿ JavaScript, CSS Grid/Flexbox

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [docs/README-PostgreSQL.md](docs/README-PostgreSQL.md) æˆ–æäº¤ Issueã€‚